<svg xmlns="http://www.w3.org/2000/svg" width="960" height="500" viewBox="0 0 960 500" role="img" aria-labelledby="title desc">
  <title id="title">Accountability Agent - System Architecture</title>
  <desc id="desc">Telegram users interact with a bot that routes messages through a supervisor to five specialized agents: CheckIn, Query, Emotional Support, Pattern Detection, and Reporting. Firestore persists data and GCP Cloud Run hosts the system.</desc>

  <defs>
    <style>
      .bg { fill: #f8fafc; }
      .border { stroke: #cbd5e1; stroke-width: 1.5; fill: none; }
      .box { fill: #ffffff; stroke: #94a3b8; stroke-width: 1.5; rx: 10; ry: 10; }
      .box-primary { fill: #eff6ff; stroke: #3b82f6; stroke-width: 2; rx: 10; ry: 10; }
      .box-accent { fill: #f5f3ff; stroke: #7c3aed; stroke-width: 2; rx: 10; ry: 10; }
      .box-infra { fill: #f0fdf4; stroke: #22c55e; stroke-width: 1.5; rx: 10; ry: 10; }
      .box-data { fill: #fff7ed; stroke: #ea580c; stroke-width: 1.5; rx: 10; ry: 10; }
      .label { font-family: Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; font-size: 14px; font-weight: 600; fill: #0f172a; text-anchor: middle; }
      .sub { font-family: Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; font-size: 11px; fill: #475569; text-anchor: middle; }
      .title-text { font-family: Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; font-size: 11px; fill: #64748b; text-anchor: middle; font-weight: 500; letter-spacing: 0.5px; }
      .connector { stroke: #475569; stroke-width: 1.5; fill: none; marker-end: url(#arrow); }
    </style>
    <marker id="arrow" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto-start-reverse">
      <path d="M 0 0 L 8 4 L 0 8 z" fill="#475569" />
    </marker>
  </defs>

  <rect class="bg" x="1" y="1" width="958" height="498" rx="14" ry="14" />
  <rect class="border" x="1" y="1" width="958" height="498" rx="14" ry="14" />

  <!-- Telegram User -->
  <rect class="box" x="380" y="20" width="200" height="50" />
  <text class="label" x="480" y="42">Telegram User</text>
  <text class="sub" x="480" y="58">check-ins, queries, reports</text>

  <!-- Arrow to Bot API -->
  <path class="connector" d="M480 70 L480 105" />

  <!-- Telegram Bot API -->
  <rect class="box" x="360" y="105" width="240" height="45" />
  <text class="label" x="480" y="126">Telegram Bot API</text>
  <text class="sub" x="480" y="141">webhook gateway</text>

  <!-- Arrow to Supervisor -->
  <path class="connector" d="M480 150 L480 185" />

  <!-- Supervisor Router -->
  <rect class="box-primary" x="330" y="185" width="300" height="55" />
  <text class="label" x="480" y="209" style="fill:#1e40af">Supervisor Router</text>
  <text class="sub" x="480" y="227">intent detection + agent dispatch</text>

  <!-- Fan-out to 5 agents -->
  <path class="connector" d="M480 240 L480 265" />
  <path class="connector" d="M480 265 L110 265 L110 295" />
  <path class="connector" d="M480 265 L290 265 L290 295" />
  <path class="connector" d="M480 265 L480 295" />
  <path class="connector" d="M480 265 L670 265 L670 295" />
  <path class="connector" d="M480 265 L850 265 L850 295" />

  <!-- Agent 1: CheckIn -->
  <rect class="box-accent" x="40" y="295" width="140" height="65" />
  <text class="label" x="110" y="322" style="fill:#5b21b6">CheckIn</text>
  <text class="sub" x="110" y="339">Agent</text>
  <text class="sub" x="110" y="352">daily logging</text>

  <!-- Agent 2: Query -->
  <rect class="box-accent" x="220" y="295" width="140" height="65" />
  <text class="label" x="290" y="322" style="fill:#5b21b6">Query</text>
  <text class="sub" x="290" y="339">Agent</text>
  <text class="sub" x="290" y="352">history lookup</text>

  <!-- Agent 3: Emotional -->
  <rect class="box-accent" x="410" y="295" width="140" height="65" />
  <text class="label" x="480" y="322" style="fill:#5b21b6">Emotional</text>
  <text class="sub" x="480" y="339">Support Agent</text>
  <text class="sub" x="480" y="352">context-aware</text>

  <!-- Agent 4: Pattern Detection -->
  <rect class="box-accent" x="600" y="295" width="140" height="65" />
  <text class="label" x="670" y="322" style="fill:#5b21b6">Pattern</text>
  <text class="sub" x="670" y="339">Detection Agent</text>
  <text class="sub" x="670" y="352">trends + streaks</text>

  <!-- Agent 5: Reporting -->
  <rect class="box-accent" x="780" y="295" width="140" height="65" />
  <text class="label" x="850" y="322" style="fill:#5b21b6">Reporting</text>
  <text class="sub" x="850" y="339">Agent</text>
  <text class="sub" x="850" y="352">weekly summaries</text>

  <!-- Data and Infra layer -->
  <text class="title-text" x="480" y="393">DATA &amp; INFRASTRUCTURE</text>
  <line x1="100" y1="398" x2="860" y2="398" stroke="#cbd5e1" stroke-width="1" stroke-dasharray="4,3" />

  <!-- Firestore -->
  <rect class="box-data" x="160" y="412" width="220" height="50" />
  <text class="label" x="270" y="434" style="fill:#c2410c">Firestore</text>
  <text class="sub" x="270" y="450">check-ins, goals, achievements</text>

  <!-- Google Gemini -->
  <rect class="box" x="420" y="412" width="160" height="50" />
  <text class="label" x="500" y="434">Google Gemini</text>
  <text class="sub" x="500" y="450">LLM backbone</text>

  <!-- GCP Cloud Run -->
  <rect class="box-infra" x="620" y="412" width="200" height="50" />
  <text class="label" x="720" y="434" style="fill:#166534">GCP Cloud Run</text>
  <text class="sub" x="720" y="450">containerized hosting</text>

  <!-- Gamification note -->
  <rect class="box" x="320" y="470" width="320" height="24" rx="12" ry="12" />
  <text class="sub" x="480" y="486" style="font-weight:500;fill:#64748b">+ Gamification engine (XP, streaks, achievements)</text>
</svg>
